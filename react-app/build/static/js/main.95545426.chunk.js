(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{202:function(e,t,a){},203:function(e,t,a){},204:function(e,t,a){},205:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(26),s=a.n(c),r=a(15),o=a(4),i=(a(89),a(90),a(45)),l=a.n(i),d=a(77),j=a(20),u=a.n(j),b={getLocalRefreshToken:function(){var e=JSON.parse(localStorage.getItem("user"));return null===e||void 0===e?void 0:e.refreshToken},getLocalAccessToken:function(){var e=JSON.parse(localStorage.getItem("user"));return null===e||void 0===e?void 0:e.accessToken},updateLocalAccessToken:function(e){var t=JSON.parse(localStorage.getItem("user"));t.accessToken=e,localStorage.setItem("user",JSON.stringify(t))},getUser:function(){return JSON.parse(localStorage.getItem("user"))},setUser:function(e){console.log(JSON.stringify(e)),localStorage.setItem("user",JSON.stringify(e))},removeUser:function(){localStorage.removeItem("user")}},m=u.a.create({baseURL:"https://nature-navigator.ru/api",headers:{"Content-Type":"application/json"}});m.interceptors.request.use((function(e){var t=b.getLocalAccessToken();return t&&(e.headers.Authorization="Bearer "+t),e}),(function(e){return Promise.reject(e)})),m.interceptors.response.use((function(e){return e}),function(){var e=Object(d.a)(l.a.mark((function e(t){var a,n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/auth/signin"===(a=t.config).url||!t.response){e.next=16;break}if(401!==t.response.status||a._retry){e.next=16;break}return a._retry=!0,e.prev=4,e.next=7,m.post("/auth/refreshtoken",{refreshToken:b.getLocalRefreshToken()});case 7:return n=e.sent,c=n.data.accessToken,b.updateLocalAccessToken(c),e.abrupt("return",m(a));case 13:return e.prev=13,e.t0=e.catch(4),e.abrupt("return",Promise.reject(e.t0));case 16:return e.abrupt("return",Promise.reject(t));case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}());var h=m,O={register:function(e,t,a){return h.post("/auth/signup",{username:e,email:t,password:a})},login:function(e,t){return h.post("/auth/signin",{username:e,password:t}).then((function(e){return e.data.accessToken&&b.setUser(e.data),e.data}))},logout:function(){b.removeUser()},getCurrentUser:function(){return JSON.parse(localStorage.getItem("user"))}},f=a(36),p=a.n(f),v=a(29),x=a.n(v),g=a(37),N=a.n(g),y=a(0),k=function(e){if(!e)return Object(y.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},_=function(e){var t=Object(n.useRef)(),a=Object(n.useRef)(),c=Object(n.useState)(""),s=Object(o.a)(c,2),r=s[0],i=s[1],l=Object(n.useState)(""),d=Object(o.a)(l,2),j=d[0],u=d[1],b=Object(n.useState)(!1),m=Object(o.a)(b,2),h=m[0],f=m[1],v=Object(n.useState)(""),g=Object(o.a)(v,2),_=g[0],C=g[1];return Object(y.jsx)("div",{className:"col-md-12",children:Object(y.jsxs)("div",{className:"card card-container",children:[Object(y.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(y.jsxs)(p.a,{onSubmit:function(n){n.preventDefault(),C(""),f(!0),t.current.validateAll(),0===a.current.context._errors.length?O.login(r,j).then((function(){e.history.push("/profile"),window.location.reload()}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();f(!1),C(t)})):f(!1)},ref:t,children:[Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"username",children:"Username"}),Object(y.jsx)(x.a,{type:"text",className:"form-control",name:"username",value:r,onChange:function(e){var t=e.target.value;i(t)},validations:[k]})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"password",children:"Password"}),Object(y.jsx)(x.a,{type:"password",className:"form-control",name:"password",value:j,onChange:function(e){var t=e.target.value;u(t)},validations:[k]})]}),Object(y.jsx)("div",{className:"form-group",children:Object(y.jsxs)("button",{className:"btn btn-primary btn-block",disabled:h,children:[h&&Object(y.jsx)("span",{className:"spinner-border spinner-border-sm"}),Object(y.jsx)("span",{children:"Login"})]})}),_&&Object(y.jsx)("div",{className:"form-group",children:Object(y.jsx)("div",{className:"alert alert-danger",role:"alert",children:_})}),Object(y.jsx)(N.a,{style:{display:"none"},ref:a})]})]})})},C=a(78),S=function(e){if(!e)return Object(y.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},w=function(e){if(!Object(C.isEmail)(e))return Object(y.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This is not a valid email."})},I=function(e){if(e.length<3||e.length>20)return Object(y.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The username must be between 3 and 20 characters."})},L=function(e){if(e.length<6||e.length>40)return Object(y.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The password must be between 6 and 40 characters."})},E=function(e){var t=Object(n.useRef)(),a=Object(n.useRef)(),c=Object(n.useState)(""),s=Object(o.a)(c,2),r=s[0],i=s[1],l=Object(n.useState)(""),d=Object(o.a)(l,2),j=d[0],u=d[1],b=Object(n.useState)(""),m=Object(o.a)(b,2),h=m[0],f=m[1],v=Object(n.useState)(!1),g=Object(o.a)(v,2),k=g[0],_=g[1],C=Object(n.useState)(""),E=Object(o.a)(C,2),F=E[0],H=E[1];return Object(y.jsx)("div",{className:"col-md-12",children:Object(y.jsxs)("div",{className:"card card-container",children:[Object(y.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(y.jsxs)(p.a,{onSubmit:function(e){e.preventDefault(),H(""),_(!1),t.current.validateAll(),0===a.current.context._errors.length&&O.register(r,j,h).then((function(e){H(e.data.message),_(!0)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();H(t),_(!1)}))},ref:t,children:[!k&&Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"username",children:"Username"}),Object(y.jsx)(x.a,{type:"text",className:"form-control",name:"username",value:r,onChange:function(e){var t=e.target.value;i(t)},validations:[S,I]})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"email",children:"Email"}),Object(y.jsx)(x.a,{type:"text",className:"form-control",name:"email",value:j,onChange:function(e){var t=e.target.value;u(t)},validations:[S,w]})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"password",children:"Password"}),Object(y.jsx)(x.a,{type:"password",className:"form-control",name:"password",value:h,onChange:function(e){var t=e.target.value;f(t)},validations:[S,L]})]}),Object(y.jsx)("div",{className:"form-group",children:Object(y.jsx)("button",{className:"btn btn-primary btn-block",children:"Sign Up"})})]}),F&&Object(y.jsx)("div",{className:"form-group",children:Object(y.jsx)("div",{className:k?"alert alert-success":"alert alert-danger",role:"alert",children:F})}),Object(y.jsx)(N.a,{style:{display:"none"},ref:a})]})]})})},F=a(11),H=a(2),U={getPublicContent:function(){return h.get("/test/all")},getUserBoard:function(){return h.get("/test/user")},getModeratorBoard:function(){return h.get("/users")},getAdminBoard:function(){return h.get("/users")},updateUser:function(e,t){return h.put("/users/".concat(e),t)}},R={getHotel:function(){return h.get("/hotels")},getPopular:function(){return h.get("/hotels")},getRecommendedByUserId:function(e){return h.get("/hotels/getRecommendations/".concat(e))},getHotelById:function(e){return h.get("/hotels/".concat(e))},getStats:function(){return h.get("/hotels/stats")},findHotels:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.qty,a=void 0===t?"1":t,n=e.days,c=void 0===n?"1":n,s=e.children,r=void 0===s?"0":s,o=e.activity,i=void 0===o?"3":o,l=e.safety,d=void 0===l?"3":l,j=e.comfort,u=void 0===j?"3":j,b=e.price,m=void 0===b?"3":b,O=e.distance,f=void 0===O?"3":O,p=e.distance_from_Kazan,v=void 0===p?"0":p,x=e.budget,g=void 0===x?"0":x,N=e.campaign,y=void 0===N?"0":N,k=e.active_recreation_on_the_water,_=void 0===k?"0":k,C=e.fishing,S=void 0===C?"0":C,w=e.football,I=void 0===w?"0":w,L=e.volleyball,E=void 0===L?"0":L,F=e.table_tennis,H=void 0===F?"0":F,U=e.tennis,R=void 0===U?"0":U,B=e.cycling,T=void 0===B?"0":B,A={qty:a,days:c,children:r,activity:i,safety:d,comfort:u,price:m,distance:f,distance_from_Kazan:v,budget:g,campaign:y,active_recreation_on_the_water:_,fishing:S,football:I,volleyball:E,table_tennis:H,tennis:R,cycling:T};return console.log(A),h.get("/hotels/findHotels",{params:A})},getResidenceHistory:function(e){return h.get("/hotels/".concat(e,"/residenceHistory"))}};a(202);var B=a(6),T=a(8),A="http://localhost:8080/api/likes",P=new(function(){function e(){Object(B.a)(this,e)}return Object(T.a)(e,[{key:"getAllLikes",value:function(){return u.a.get(A)}},{key:"getLikeById",value:function(e){return u.a.get("".concat(A,"/").concat(e))}},{key:"createLike",value:function(e){return u.a.post(A,e)}},{key:"createLikeById",value:function(e,t){var a=new URLSearchParams;return a.append("user_id",e),a.append("hotel_id",t),u.a.post("".concat(A,"/byId"),null,{params:a})}},{key:"updateLike",value:function(e,t){return u.a.put("".concat(A,"/").concat(e),t)}},{key:"deleteLike",value:function(e){return u.a.delete("".concat(A,"/").concat(e))}},{key:"deleteAllLikes",value:function(){return u.a.delete(A)}}]),e}()),D=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=(t[0],t[1]),c=Object(n.useState)([]),s=Object(o.a)(c,2),i=s[0],l=s[1],d=Object(n.useState)(null),j=Object(o.a)(d,2),u=j[0],b=j[1],m=Object(n.useState)({qty:"0",days:"0",children:"0",activity:"0",safety:"0",comfort:"0",price:"0",distance:"0",campaign:"0",active_recreation_on_the_water:!1,fishing:!1,football:!1,volleyball:!1,table_tennis:!1,tennis:!1,cycling:!1,distance_from_Kazan:"0",budget:"0"}),h=Object(o.a)(m,2),f=h[0],p=h[1];Object(n.useEffect)((function(){U.getPublicContent().then((function(e){a(e.data)}),(function(e){var t=e.response&&e.response.data||e.message||e.toString();a(t)})),R.getHotel().then((function(e){l(e.data),console.log(e.data)}),(function(e){console.error("Failed to fetch hotels:",e)}));var e=O.getCurrentUser();e&&b(e)}),[]);var v=function(e){var t=e.target,a=t.name,n=t.value,c=t.type,s=t.checked;p("checkbox"===c?Object(H.a)(Object(H.a)({},f),{},Object(F.a)({},a,s)):Object(H.a)(Object(H.a)({},f),{},Object(F.a)({},a,n)))};return Object(y.jsx)("div",{className:"container",children:Object(y.jsxs)("div",{className:"main",children:[Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=Object.fromEntries(Object.entries(f).map((function(e){var t=Object(o.a)(e,2),a=t[0],n=t[1];return"boolean"===typeof n?[a,n?"1":"0"]:[a,n]})));R.findHotels(t).then((function(e){l(e.data),console.log(e.status)}),(function(e){var t=e.response&&e.response.data||e.message||e.toString();l(t)}))},className:"form",children:[Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"qty",children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0447\u0435\u043b\u043e\u0432\u0435\u043a:"}),Object(y.jsx)("input",{type:"text",className:"form-control",name:"qty",id:"qty",value:f.qty,onChange:v})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"days",children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0434\u043d\u0435\u0439:"}),Object(y.jsx)("input",{type:"text",className:"form-control",name:"days",id:"days",value:f.days,onChange:v})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"children",children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0434\u0435\u0442\u0435\u0439:"}),Object(y.jsx)("input",{type:"text",className:"form-control",name:"children",id:"children",value:f.children,onChange:v})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{children:"\u0421\u0435\u043c\u044c\u044f:"}),Object(y.jsxs)("div",{className:"form-check",children:[Object(y.jsx)("input",{type:"radio",className:"form-check-input",name:"campaign",id:"family",value:"family",checked:"family"===f.campaign,onChange:v}),Object(y.jsx)("label",{className:"form-check-label",htmlFor:"family",children:"\u0421\u0435\u043c\u044c\u044f"})]}),Object(y.jsxs)("div",{className:"form-check",children:[Object(y.jsx)("input",{type:"radio",className:"form-check-input",name:"campaign",id:"the_youth",value:"the_youth",checked:"the_youth"===f.campaign,onChange:v}),Object(y.jsx)("label",{className:"form-check-label",htmlFor:"the_youth",children:"\u041c\u043e\u043b\u043e\u0434\u0451\u0436\u044c"})]}),Object(y.jsxs)("div",{className:"form-check",children:[Object(y.jsx)("input",{type:"radio",className:"form-check-input",name:"campaign",id:"old_friends",value:"old_friends",checked:"old_friends"===f.campaign,onChange:v}),Object(y.jsx)("label",{className:"form-check-label",htmlFor:"old_friends",children:"\u0421\u0442\u0430\u0440\u044b\u0435 \u0434\u0440\u0443\u0437\u044c\u044f"})]})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"activity",children:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438 \u043e\u0442\u0434\u044b\u0445\u0430:"}),Object(y.jsx)("input",{type:"range",className:"form-control",min:"1",max:"5",name:"activity",value:f.activity,onChange:v})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"safety",children:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438:"}),Object(y.jsx)("input",{type:"range",className:"form-control",min:"1",max:"5",name:"safety",value:f.safety,onChange:v})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"comfort",children:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u043a\u043e\u043c\u0444\u043e\u0440\u0442\u0430:"}),Object(y.jsx)("input",{type:"range",className:"form-control",min:"1",max:"5",name:"comfort",value:f.comfort,onChange:v})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"price",children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c:"}),Object(y.jsx)("input",{type:"range",className:"form-control",min:"1",max:"5",name:"price",value:f.price,onChange:v})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"distance",children:"\u0420\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435:"}),Object(y.jsx)("input",{type:"range",className:"form-control",min:"1",max:"5",name:"distance",value:f.distance,onChange:v})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{children:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0439 \u043e\u0442\u0434\u044b\u0445 \u043d\u0430 \u0432\u043e\u0434\u0435:"}),Object(y.jsxs)("div",{className:"form-check",children:[Object(y.jsx)("input",{type:"checkbox",className:"form-check-input",name:"active_recreation_on_the_water",id:"active_recreation_on_the_water",checked:f.active_recreation_on_the_water,onChange:v}),Object(y.jsx)("label",{className:"form-check-label",htmlFor:"active_recreation_on_the_water",children:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0439 \u043e\u0442\u0434\u044b\u0445 \u043d\u0430 \u0432\u043e\u0434\u0435"})]}),Object(y.jsxs)("div",{className:"form-check",children:[Object(y.jsx)("input",{type:"checkbox",className:"form-check-input",name:"fishing",id:"fishing",checked:f.fishing,onChange:v}),Object(y.jsx)("label",{className:"form-check-label",htmlFor:"fishing",children:"\u0420\u044b\u0431\u0430\u043b\u043a\u0430"})]}),Object(y.jsxs)("div",{className:"form-check",children:[Object(y.jsx)("input",{type:"checkbox",className:"form-check-input",name:"football",id:"football",checked:f.football,onChange:v}),Object(y.jsx)("label",{className:"form-check-label",htmlFor:"football",children:"\u0424\u0443\u0442\u0431\u043e\u043b"})]}),Object(y.jsxs)("div",{className:"form-check",children:[Object(y.jsx)("input",{type:"checkbox",className:"form-check-input",name:"volleyball",id:"volleyball",checked:f.volleyball,onChange:v}),Object(y.jsx)("label",{className:"form-check-label",htmlFor:"volleyball",children:"\u0412\u043e\u043b\u0435\u0439\u0431\u043e\u043b"})]}),Object(y.jsxs)("div",{className:"form-check",children:[Object(y.jsx)("input",{type:"checkbox",className:"form-check-input",name:"table_tennis",id:"table_tennis",checked:f.table_tennis,onChange:v}),Object(y.jsx)("label",{className:"form-check-label",htmlFor:"table_tennis",children:"\u041d\u0430\u0441\u0442\u043e\u043b\u044c\u043d\u044b\u0439 \u0442\u0435\u043d\u043d\u0438\u0441"})]}),Object(y.jsxs)("div",{className:"form-check",children:[Object(y.jsx)("input",{type:"checkbox",className:"form-check-input",name:"tennis",id:"tennis",checked:f.tennis,onChange:v}),Object(y.jsx)("label",{className:"form-check-label",htmlFor:"tennis",children:"\u0411\u043e\u043b\u044c\u0448\u043e\u0439 \u0442\u0435\u043d\u043d\u0438\u0441"})]}),Object(y.jsxs)("div",{className:"form-check",children:[Object(y.jsx)("input",{type:"checkbox",className:"form-check-input",name:"cycling",id:"cycling",checked:f.cycling,onChange:v}),Object(y.jsx)("label",{className:"form-check-label",htmlFor:"cycling",children:"\u0412\u0435\u043b\u043e\u0441\u043f\u043e\u0440\u0442"})]})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"distance_from_Kazan",children:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043e\u0442 \u041a\u0430\u0437\u0430\u043d\u0438 (\u043a\u043c):"}),Object(y.jsx)("input",{type:"text",className:"form-control",name:"distance_from_Kazan",id:"distance_from_Kazan",value:f.distance_from_Kazan,onChange:v})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{htmlFor:"budget",children:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0431\u044e\u0434\u0436\u0435\u0442 (\u0440\u0443\u0431.):"}),Object(y.jsx)("input",{type:"text",className:"form-control",name:"budget",id:"budget",value:f.budget,onChange:v})]}),Object(y.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Search Hotels"})]}),Object(y.jsx)("div",{children:Object(y.jsxs)("div",{className:"container mt-4",children:[Object(y.jsx)("h2",{children:"\u041c\u0435\u0441\u0442\u0430 \u043e\u0442\u0434\u044b\u0445\u0430 \u043f\u043e \u0432\u0430\u0448\u0438\u043c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c:"}),Object(y.jsx)("div",{className:"row",children:Array.isArray(i)&&i.map((function(e,t){return Object(y.jsx)("div",{className:"col-md-6 ".concat(t<3?"highlighted":""),children:Object(y.jsxs)("div",{className:"card mb-3",style:{width:"100%"},children:[Object(y.jsx)("button",{className:"heart-btn",onClick:function(){return function(e){console.log(e);var t=u&&u.id;P.createLikeById(t,e).then((function(e){console.log("Like added:",e.data)})).catch((function(e){console.error("Failed to add like:",e)}))}(e.id)},children:"\u2764"}),Object(y.jsxs)(r.b,{to:"/hotel/".concat(e.id),children:[Object(y.jsx)("div",{className:"card-body-number",children:t+1}),Object(y.jsx)("img",{src:e.photoList[0].link,className:"card-img-top",alt:e.name}),Object(y.jsx)("div",{className:"card-body",children:Object(y.jsx)("h5",{className:"card-title",children:e.name})})]})]})},e.id)}))})]})})]})})};a(203);var q=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)([]),i=Object(o.a)(s,2),l=i[0],d=i[1],j=Object(n.useState)(null),u=Object(o.a)(j,2),b=u[0],m=u[1];return Object(n.useEffect)((function(){R.getPopular().then((function(e){c(e.data)}));var e=O.getCurrentUser();e&&(m(e),R.getRecommendedByUserId(e.id).then((function(e){d(e.data)})))}),[]),Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"container mt-4",children:[Object(y.jsx)("h2",{children:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u043c\u0435\u0441\u0442\u0430 \u043e\u0442\u0434\u044b\u0445\u0430"}),Object(y.jsx)("div",{className:"d-flex overflow-auto",children:a.map((function(e){return Object(y.jsx)("div",{className:"card-pop",children:Object(y.jsxs)(r.b,{to:"/hotel/".concat(e.id),children:[Object(y.jsx)("img",{src:e.photoList[0].link,className:"card-img-top",alt:e.name}),Object(y.jsx)("div",{className:"card-body",children:Object(y.jsx)("h5",{className:"card-title",children:e.name})})]})},e.id)}))})]}),b&&Object(y.jsxs)("div",{className:"container mt-4",children:[Object(y.jsx)("h2",{children:"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0412\u0430\u043c \u043c\u0435\u0441\u0442\u0430 \u043e\u0442\u0434\u044b\u0445\u0430"}),Object(y.jsx)("div",{className:"row",children:l.map((function(e,t){return Object(y.jsx)("div",{className:"col-md-4 ".concat(t<3?"highlighted":""),children:Object(y.jsxs)("div",{className:"card mb-3",children:[Object(y.jsx)("div",{className:"card-body-number",children:t+1}),Object(y.jsx)("button",{className:"heart-btn",onClick:function(){return function(e){console.log(e);var t=b&&b.id;P.createLikeById(t,e).then((function(e){console.log("Like added:",e.data)})).catch((function(e){console.error("Failed to add like:",e)}))}(e.id)},children:"\u2764"})," ",Object(y.jsxs)(r.b,{to:"/hotel/".concat(e.id),children:[Object(y.jsx)("img",{src:e.photoList[0].link,className:"card-img-top",alt:e.name}),Object(y.jsx)("div",{className:"card-body",children:Object(y.jsx)("h5",{className:"card-title",children:e.name})})]})]})},e.id)}))})]})]})},z=function(){var e=O.getCurrentUser();return Object(y.jsxs)("div",{className:"container",children:[Object(y.jsx)("header",{className:"jumbotron",children:Object(y.jsxs)("h3",{children:[Object(y.jsx)("strong",{children:e.username})," Profile"]})}),Object(y.jsxs)("p",{children:[Object(y.jsx)("strong",{children:"Token:"})," ",e.accessToken.substring(0,20)," ..."," ",e.accessToken.substr(e.accessToken.length-20)]}),Object(y.jsxs)("p",{children:[Object(y.jsx)("strong",{children:"Id:"})," ",e.id]}),Object(y.jsxs)("p",{children:[Object(y.jsx)("strong",{children:"Email:"})," ",e.email]}),Object(y.jsx)("strong",{children:"Authorities:"}),Object(y.jsx)("ul",{children:e.roles&&e.roles.map((function(e,t){return Object(y.jsx)("li",{children:e},t)}))}),Object(y.jsx)("ul",{children:e.likedHotels&&e.likedHotels.map((function(e,t){return Object(y.jsx)("li",{children:e},t)}))})]})},J={on:function(e,t){document.addEventListener(e,(function(e){return t(e.detail)}))},dispatch:function(e,t){document.dispatchEvent(new CustomEvent(e,{detail:t}))},remove:function(e,t){document.removeEventListener(e,t)}},G=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){U.getUserBoard().then((function(e){c(e.data)}),(function(e){e.response&&403===e.response.status&&J.dispatch("logout")}))}),[]),Object(y.jsx)("div",{className:"container",children:Object(y.jsx)("header",{className:"jumbotron",children:Object(y.jsx)("h3",{children:a})})})},K=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){U.getModeratorBoard().then((function(e){c(e.data)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();c(t),e.response&&403===e.response.status&&J.dispatch("logout")}))}),[]),Object(y.jsx)("div",{className:"container",children:Object(y.jsx)("header",{className:"jumbotron",children:Object(y.jsx)("h3",{children:a})})})},M=a(210),V=a(208),Q=a(209),W=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(!1),r=Object(o.a)(s,2),i=r[0],l=r[1],d=Object(n.useState)({}),j=Object(o.a)(d,2),u=j[0],b=j[1],m=Object(n.useState)({email:"",first_name:""}),h=Object(o.a)(m,2),O=h[0],f=h[1];Object(n.useEffect)((function(){U.getAdminBoard().then((function(e){c(e.data)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();c(t),e.response&&403===e.response.status&&J.dispatch("logout")}))}),[]);var p=function(){l(!1),f({email:"",first_name:""})};return""===a?Object(y.jsx)("div",{children:"Loading..."}):Object(y.jsx)("div",{className:"container",children:Object(y.jsxs)("header",{className:"jumbotron",children:[a.length>0?Object(y.jsxs)("table",{children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"ID"}),Object(y.jsx)("th",{children:"Username"}),Object(y.jsx)("th",{children:"Email"}),Object(y.jsx)("th",{children:"Password"}),Object(y.jsx)("th",{children:"Roles"}),Object(y.jsx)("th",{children:"Action"})]})}),Object(y.jsx)("tbody",{children:a.map((function(e){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:e.id}),Object(y.jsx)("td",{children:e.username}),Object(y.jsx)("td",{children:e.email}),Object(y.jsx)("td",{children:e.password}),Object(y.jsx)("td",{children:e.roles.length>0?e.roles.map((function(e){return e.name})).join(", "):"No roles"}),Object(y.jsx)("td",{children:Object(y.jsx)(M.a,{variant:"primary",onClick:function(){return function(e){b(e),l(!0),f({id:e.id,username:e.username||"",password:e.password||"",email:e.email||"",first_name:e.first_name||"",second_name:e.second_name||"",otchestvo:e.otchestvo||"",phone_num:e.phone_num||""})}(e)},children:"Edit"})})]},e.id)}))})]}):Object(y.jsx)("p",{children:"No data available."}),Object(y.jsxs)(V.a,{show:i,onHide:p,children:[Object(y.jsx)(V.a.Header,{closeButton:!0,children:Object(y.jsx)(V.a.Title,{children:"Edit User"})}),Object(y.jsx)(V.a.Body,{children:Object(y.jsxs)(Q.a,{children:[Object(y.jsxs)(Q.a.Group,{controlId:"formUsername",children:[Object(y.jsx)(Q.a.Label,{children:"Username"}),Object(y.jsx)(Q.a.Control,{type:"text",placeholder:"Enter username",value:O.username,onChange:function(e){return f(Object(H.a)(Object(H.a)({},O),{},{username:e.target.value}))}})]}),Object(y.jsxs)(Q.a.Group,{controlId:"formPassword",children:[Object(y.jsx)(Q.a.Label,{children:"Password"}),Object(y.jsx)(Q.a.Control,{type:"password",placeholder:"Enter password",value:O.password,onChange:function(e){return f(Object(H.a)(Object(H.a)({},O),{},{password:e.target.value}))}})]}),Object(y.jsxs)(Q.a.Group,{controlId:"formEmail",children:[Object(y.jsx)(Q.a.Label,{children:"Email"}),Object(y.jsx)(Q.a.Control,{type:"text",placeholder:"Enter email",value:O.email,onChange:function(e){return f(Object(H.a)(Object(H.a)({},O),{},{email:e.target.value}))}})]}),Object(y.jsxs)(Q.a.Group,{controlId:"formFirstName",children:[Object(y.jsx)(Q.a.Label,{children:"First Name"}),Object(y.jsx)(Q.a.Control,{type:"text",placeholder:"Enter first name",value:O.first_name,onChange:function(e){return f(Object(H.a)(Object(H.a)({},O),{},{first_name:e.target.value}))}})]}),Object(y.jsxs)(Q.a.Group,{controlId:"formSecondName",children:[Object(y.jsx)(Q.a.Label,{children:"Second Name"}),Object(y.jsx)(Q.a.Control,{type:"text",placeholder:"Enter second name",value:O.second_name,onChange:function(e){return f(Object(H.a)(Object(H.a)({},O),{},{second_name:e.target.value}))}})]}),Object(y.jsxs)(Q.a.Group,{controlId:"formOtchestvo",children:[Object(y.jsx)(Q.a.Label,{children:"Otchestvo"}),Object(y.jsx)(Q.a.Control,{type:"text",placeholder:"Enter otchestvo",value:O.otchestvo,onChange:function(e){return f(Object(H.a)(Object(H.a)({},O),{},{otchestvo:e.target.value}))}})]}),Object(y.jsxs)(Q.a.Group,{controlId:"formPhoneNum",children:[Object(y.jsx)(Q.a.Label,{children:"Phone Number"}),Object(y.jsx)(Q.a.Control,{type:"text",placeholder:"Enter phone number",value:O.phone_num,onChange:function(e){return f(Object(H.a)(Object(H.a)({},O),{},{phone_num:e.target.value}))}})]})]})}),Object(y.jsxs)(V.a.Footer,{children:[Object(y.jsx)(M.a,{variant:"secondary",onClick:p,children:"Close"}),Object(y.jsx)(M.a,{variant:"primary",onClick:function(){var e=u.id,t={id:e,username:O.username,password:O.password,email:O.email,first_name:O.first_name,second_name:O.second_name,otchestvo:O.otchestvo,phone_num:O.phone_num};U.updateUser(e,t).then((function(){c((function(a){return a.map((function(a){return a.id===e?Object(H.a)(Object(H.a)({},a),t):a}))})),console.log("User updated successfully")})).catch((function(e){console.error("Error updating user:",e)})).finally((function(){l(!1),f({id:"",username:"",password:"",email:"",first_name:"",second_name:"",otchestvo:"",phone_num:""})}))},children:"Save Changes"})]})]})]})})},X=a(84),Z=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=(t[0],t[1]);Object(n.useEffect)((function(){U.getUserBoard().then((function(e){a(e.data)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();a(t),e.response&&403===e.response.status&&J.dispatch("logout")})),R.getStats().then((function(e){a(e.data),c(e.data)}))}),[]);var c=function(e){var t=e.map((function(e){return e[0]})),a=e.map((function(e){return parseInt(e[1],10)})),n=document.getElementById("hotelChart");new X.a(n,{type:"bar",data:{labels:t,datasets:[{label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043e\u0441\u0435\u0449\u0435\u043d\u0438\u0439",data:a,backgroundColor:"rgba(75,192,192,0.2)",borderColor:"rgba(75,192,192,1)",borderWidth:1}]},options:{scales:{y:{beginAtZero:!0}}}})};return Object(y.jsx)("div",{className:"container",children:Object(y.jsxs)("header",{className:"jumbotron",children:[Object(y.jsx)("h3",{children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e\u0441\u0435\u0449\u0435\u043d\u0438\u0439 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043e\u0442\u0435\u043b\u044f"}),Object(y.jsx)("canvas",{id:"hotelChart",width:"400",height:"200"})]})})},Y=a(16),$=a(17),ee="http://localhost:8080/api/residenceHistories",te=new(function(){function e(){Object(B.a)(this,e)}return Object(T.a)(e,[{key:"getAllResidenceHistories",value:function(){return u.a.get(ee)}},{key:"getResidenceHistoryById",value:function(e){return u.a.get("".concat(ee,"/").concat(e))}},{key:"createResidenceHistory",value:function(e){return u.a.post(ee,e,{headers:{"Content-Type":"application/json"}})}},{key:"updateResidenceHistory",value:function(e,t){return u.a.put("".concat(ee,"/").concat(e),t)}},{key:"deleteResidenceHistory",value:function(e){return u.a.delete("".concat(ee,"/").concat(e))}},{key:"insertResidenceHistory",value:function(e){var t=new URLSearchParams;return t.append("checkInDate",e.checkInDate),t.append("checkOutDate",e.checkOutDate),t.append("totalCost",e.totalCost),t.append("review",e.review),t.append("grade",e.grade),t.append("userId",e.userId),t.append("hotelId",e.hotelId),u.a.post("".concat(ee,"/insert"),t)}},{key:"getRatings",value:function(){return u.a.get("".concat(ee,"/ratings"))}},{key:"getMaxIdHotel",value:function(){return u.a.get("".concat(ee,"/maxIdHotel"))}},{key:"getResidenceHistoriesByHotelId",value:function(e){return u.a.get("".concat(ee,"/byHotel/").concat(e))}}]),e}());a(204);var ae=function(){var e,t,a=Object(Y.f)().id,c=Object(n.useState)(null),s=Object(o.a)(c,2),i=s[0],l=s[1],d=Object(n.useState)([]),j=Object(o.a)(d,2),u=j[0],b=j[1],m=Object(n.useState)(""),h=Object(o.a)(m,2),f=h[0],p=h[1],v=Object(n.useState)(1),x=Object(o.a)(v,2),g=x[0],N=x[1],k=Object(n.useState)(""),_=Object(o.a)(k,2),C=_[0],S=_[1],w=Object(n.useState)(""),I=Object(o.a)(w,2),L=I[0],E=I[1],F=Object(n.useState)(0),H=Object(o.a)(F,2),U=H[0],B=H[1],T=O.getCurrentUser();if(Object(n.useEffect)((function(){R.getHotelById(a).then((function(e){return l(e.data)}),(function(e){return console.log("Error fetching hotel details:",e)})),te.getResidenceHistoriesByHotelId(a).then((function(e){return b(e.data)}),(function(e){return console.log("Error fetching residence histories:",e)})),console.log(u)}),[a]),!i)return Object(y.jsx)("div",{children:"Loading..."});var A=null===(e=i.photoList)||void 0===e?void 0:e.slice(0,1),P=null===(t=i.photoList)||void 0===t?void 0:t.slice(1);return Object(y.jsxs)("div",{className:"container",children:[Object(y.jsxs)("div",{className:"header",children:[A&&A.length>0&&Object(y.jsx)("div",{className:"images-sidebar",children:A.map((function(e,t){return Object(y.jsx)("img",{src:e.link,alt:"Hotel View ".concat(t+1)},t)}))}),Object(y.jsxs)("div",{className:"header-info",children:[Object(y.jsx)("h2",{children:i.name}),Object(y.jsx)("p",{style:{whiteSpace:"pre-line"},children:i.description}),Object(y.jsx)(r.b,{to:"/home",children:"Back to list"})]})]}),P&&P.length>0&&Object(y.jsx)("div",{className:"main-images",children:P.map((function(e,t){return Object(y.jsx)("img",{src:e.link,alt:"Hotel View ".concat(t+3)},t)}))}),Object(y.jsxs)("div",{className:"review-container",children:[Object(y.jsx)("h3",{children:"Reviews"}),u.map((function(e){return Object(y.jsxs)("div",{className:"review",children:[Object(y.jsx)("div",{className:"review-details",children:Object(y.jsx)("p",{className:"review-text",children:e.review})}),Object(y.jsx)("div",{className:"review-grade",children:e.grade})]},e.id)}))]}),T&&Object(y.jsxs)("div",{className:"add-review-form",children:[Object(y.jsx)("h4",{children:"Add your review:"}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{className:"form-label",children:"Check-in:"}),Object(y.jsx)("input",{type:"date",className:"form-input",value:C,onChange:function(e){return S(e.target.value)}})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{className:"form-label",children:"Check-out:"}),Object(y.jsx)("input",{type:"date",className:"form-input",value:L,onChange:function(e){return E(e.target.value)}})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{className:"form-label",children:"Total cost:"}),Object(y.jsx)("input",{type:"number",className:"form-input",value:U,onChange:function(e){return B(e.target.value)},min:"0"})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{className:"form-label",children:"Review:"}),Object(y.jsx)("textarea",{className:"form-textarea",value:f,onChange:function(e){return p(e.target.value)}})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{className:"form-label",children:"Grade:"}),Object(y.jsx)("input",{type:"range",className:"form-input",value:g,min:"1",max:"5",onChange:function(e){return N(e.target.value)}})]}),Object(y.jsx)("button",{className:"form-button",onClick:function(){if(T){var e={checkInDate:C,checkOutDate:L,totalCost:U,review:f,grade:parseInt(g,10),hotel_rev:{id:parseInt(a,10)},user_rev:{id:parseInt(T.id)}};te.createResidenceHistory(e).then((function(e){b((function(t){return[].concat(Object($.a)(t),[e.data])})),p(""),N(1),S(""),E(""),B(0)}),(function(e){console.log("Error posting review:",e)}))}},children:"Submit Review"})]})]})},ne=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(!1),i=Object(o.a)(s,2),l=i[0],d=i[1],j=Object(n.useState)(void 0),u=Object(o.a)(j,2),b=u[0],m=u[1];Object(n.useEffect)((function(){var e=O.getCurrentUser();return e&&(m(e),c(e.roles.includes("ROLE_MODERATOR")),d(e.roles.includes("ROLE_ADMIN"))),J.on("logout",(function(){h()})),function(){J.remove("logout")}}),[]);var h=function(){O.logout(),c(!1),d(!1),m(void 0)};return Object(y.jsxs)("div",{style:{backgroundImage:"url('https://sun9-61.userapi.com/impg/b2iC32PN4B7tSwckVwH74Rd2pCqihNfzOugQaw/pfC2ONrXUpU.jpg?size=1442x2160&quality=96&sign=30d851392093eddc42ccf1e5b753662d&type=album')",backgroundSize:"cover",backgroundAttachment:"fixed",minHeight:"100vh",width:"100%"},children:[Object(y.jsxs)("nav",{className:"navbar navbar-expand navbar-dark bg-dark",children:[Object(y.jsx)(r.b,{to:"/home",className:"navbar-brand",children:"Nature_Navigator"}),Object(y.jsxs)("div",{className:"navbar-nav mr-auto",children:[Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsx)(r.b,{to:"/main",className:"nav-link",children:"Main"})}),Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsx)(r.b,{to:"/home",className:"nav-link",children:"Choose"})}),a&&Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsx)(r.b,{to:"/mod",className:"nav-link",children:"Moderator Board"})}),l&&Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsx)(r.b,{to:"/admin",className:"nav-link",children:"Admin Board"})}),b&&Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsx)(r.b,{to:"/user",className:"nav-link",children:"User"})}),b&&Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsx)(r.b,{to:"/stats",className:"nav-link",children:"Stats"})})]}),b?Object(y.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsx)(r.b,{to:"/profile",className:"nav-link",children:b.username})}),Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsx)("a",{href:"/login",className:"nav-link",onClick:h,children:"LogOut"})})]}):Object(y.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsx)(r.b,{to:"/login",className:"nav-link",children:"Login"})}),Object(y.jsx)("li",{className:"nav-item",children:Object(y.jsx)(r.b,{to:"/register",className:"nav-link",children:"Sign Up"})})]})]}),Object(y.jsx)("div",{className:"container mt-3",children:Object(y.jsxs)(Y.c,{children:[Object(y.jsx)(Y.a,{exact:!0,path:["/main"],component:q}),Object(y.jsx)(Y.a,{exact:!0,path:["/","/home"],component:D}),Object(y.jsx)(Y.a,{exact:!0,path:"/login",component:_}),Object(y.jsx)(Y.a,{exact:!0,path:"/register",component:E}),Object(y.jsx)(Y.a,{exact:!0,path:"/profile",component:z}),Object(y.jsx)(Y.a,{path:"/user",component:G}),Object(y.jsx)(Y.a,{path:"/mod",component:K}),Object(y.jsx)(Y.a,{path:"/admin",component:W}),Object(y.jsx)(Y.a,{path:"/stats",component:Z}),Object(y.jsx)(Y.a,{path:"/hotel/:id",component:ae})]})})]})},ce=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,211)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))};s.a.render(Object(y.jsx)(r.a,{children:Object(y.jsx)(ne,{})}),document.getElementById("root")),ce()},90:function(e,t,a){}},[[205,1,2]]]);
//# sourceMappingURL=main.95545426.chunk.js.map